---
// BackgroundIso.astro
const { color = "100, 116, 139" } = Astro.props; // Slate-500 default
---

<div class="iso-wrap" aria-hidden="true">
  <svg class="iso-lines" viewBox="0 0 100 100" preserveAspectRatio="none">
    <defs>
      <pattern id="waves" x="0" y="0" width="100" height="20" patternUnits="userSpaceOnUse">
        <path d="M0 10 Q25 20 50 10 T100 10" 
              fill="none" 
              class="wave-path" />
      </pattern>
    </defs>
    
    <rect width="100%" height="100%" fill="url(#waves)" />
  </svg>
</div>

<style define:vars={{ rgb: color }}>
  .iso-wrap {
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    opacity: 0.15; /* Keep it subtle */
    overflow: hidden;
  }

  .iso-lines {
    width: 200%; /* Wider than screen to allow sliding */
    height: 100%;
    transform: rotate(-15deg) scale(1.5); /* Angled look */
  }

  .wave-path {
    stroke: rgb(var(--rgb));
    stroke-width: 0.5;
    vector-effect: non-scaling-stroke;
    stroke-dasharray: 5 5; /* Dashed lines for "map" feel */
    animation: dashDrift 60s linear infinite;
  }

  /* Theme overrides */
  :global(.darkmode) .wave-path {
    stroke: rgba(255, 255, 255, 0.8);
  }

  @keyframes dashDrift {
    from { stroke-dashoffset: 0; }
    to { stroke-dashoffset: 100; }
  }
</style>